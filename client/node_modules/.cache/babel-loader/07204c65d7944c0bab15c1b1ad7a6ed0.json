{"ast":null,"code":"var _jsxFileName = \"/Users/Claudia/Documents/Lambda/Unit3/web-sprint-challenge-advanced-web-applications/client/src/components/Login.js\";\nimport React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { axiosWithAuth } from \"../utils/axiosWithAuth\";\n\nconst Login = () => {\n  // make a post request to retrieve a token from the api\n  // when you have handled the token, navigate to the BubblePage route\n  const [state, setState] = useState({\n    credentials: {\n      username: \"\",\n      password: \"\"\n    },\n    value: \"\"\n  });\n  const history = useHistory();\n\n  const handleChanges = e => {\n    e.persist();\n    setState({\n      credentials: { ...credentials,\n        [e.target.name]: e.target.value\n      }\n    });\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    setState({\n      value: \"\"\n    });\n    axiosWithAuth().post(\"api/login\", state.credentials).then(res => {\n      console.log(res);\n      localStorage.setItem(\"token\", JSON.stringify(res.data.payload));\n      history.push(\"/bubble-page\");\n    }).catch(err => console.log(err));\n  };\n\n  return React.createElement(React.Fragment, null, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, \"Welcome to the Bubble App!\"), React.createElement(\"form\", {\n    className: \"login-form\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    name: \"username\",\n    value: credentials.username,\n    onChange: handleChanges,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    type: \"text\",\n    name: \"password\",\n    value: credentials.password,\n    onChange: handleChanges,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    className: \"login-button\",\n    onClick: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, \"Log In\")));\n};\n\nexport default Login;","map":{"version":3,"sources":["/Users/Claudia/Documents/Lambda/Unit3/web-sprint-challenge-advanced-web-applications/client/src/components/Login.js"],"names":["React","useState","useHistory","axiosWithAuth","Login","state","setState","credentials","username","password","value","history","handleChanges","e","persist","target","name","handleSubmit","preventDefault","post","then","res","console","log","localStorage","setItem","JSON","stringify","data","payload","push","catch","err"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,aAAT,QAA8B,wBAA9B;;AAEA,MAAMC,KAAK,GAAG,MAAM;AAClB;AACA;AAEA,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBL,QAAQ,CAAC;AACjCM,IAAAA,WAAW,EAAE;AACXC,MAAAA,QAAQ,EAAE,EADC;AAEXC,MAAAA,QAAQ,EAAE;AAFC,KADoB;AAKjCC,IAAAA,KAAK,EAAE;AAL0B,GAAD,CAAlC;AAQA,QAAMC,OAAO,GAAGT,UAAU,EAA1B;;AAEA,QAAMU,aAAa,GAAGC,CAAC,IAAI;AACzBA,IAAAA,CAAC,CAACC,OAAF;AACAR,IAAAA,QAAQ,CAAC;AACPC,MAAAA,WAAW,EAAE,EACX,GAAGA,WADQ;AAEX,SAACM,CAAC,CAACE,MAAF,CAASC,IAAV,GAAiBH,CAAC,CAACE,MAAF,CAASL;AAFf;AADN,KAAD,CAAR;AAMD,GARD;;AAUA,QAAMO,YAAY,GAAGJ,CAAC,IAAI;AACxBA,IAAAA,CAAC,CAACK,cAAF;AACAZ,IAAAA,QAAQ,CAAC;AACPI,MAAAA,KAAK,EAAE;AADA,KAAD,CAAR;AAGAP,IAAAA,aAAa,GACVgB,IADH,CACQ,WADR,EACqBd,KAAK,CAACE,WAD3B,EAEGa,IAFH,CAEQC,GAAG,IAAI;AACXC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACAG,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BC,IAAI,CAACC,SAAL,CAAeN,GAAG,CAACO,IAAJ,CAASC,OAAxB,CAA9B;AACAlB,MAAAA,OAAO,CAACmB,IAAR,CAAa,cAAb;AACD,KANH,EAOGC,KAPH,CAOSC,GAAG,IAAIV,OAAO,CAACC,GAAR,CAAYS,GAAZ,CAPhB;AAQD,GAbD;;AAeA,SACE,0CACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCADF,EAEE;AAAM,IAAA,SAAS,EAAC,YAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,IAAI,EAAC,UAFP;AAGE,IAAA,KAAK,EAAEzB,WAAW,CAACC,QAHrB;AAIE,IAAA,QAAQ,EAAEI,aAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAOE;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,IAAI,EAAC,UAFP;AAGE,IAAA,KAAK,EAAEL,WAAW,CAACE,QAHrB;AAIE,IAAA,QAAQ,EAAEG,aAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAPF,EAaE;AAAQ,IAAA,SAAS,EAAC,cAAlB;AAAiC,IAAA,OAAO,EAAEK,YAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAbF,CAFF,CADF;AAoBD,CA3DD;;AA6DA,eAAeb,KAAf","sourcesContent":["import React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { axiosWithAuth } from \"../utils/axiosWithAuth\";\n\nconst Login = () => {\n  // make a post request to retrieve a token from the api\n  // when you have handled the token, navigate to the BubblePage route\n\n  const [state, setState] = useState({\n    credentials: {\n      username: \"\",\n      password: \"\"\n    },\n    value: \"\",\n  });\n\n  const history = useHistory();\n\n  const handleChanges = e => {\n    e.persist();\n    setState({\n      credentials: {\n        ...credentials,\n        [e.target.name]: e.target.value,\n      },\n    });\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    setState({\n      value: \"\",\n    });\n    axiosWithAuth()\n      .post(\"api/login\", state.credentials)\n      .then(res => {\n        console.log(res);\n        localStorage.setItem(\"token\", JSON.stringify(res.data.payload));\n        history.push(\"/bubble-page\");\n      })\n      .catch(err => console.log(err))\n  };\n\n  return (\n    <>\n      <h1>Welcome to the Bubble App!</h1>\n      <form className=\"login-form\">\n        <input\n          type=\"text\"\n          name=\"username\"\n          value={credentials.username}\n          onChange={handleChanges}\n        />\n        <input\n          type=\"text\"\n          name=\"password\"\n          value={credentials.password}\n          onChange={handleChanges}\n        />\n        <button className=\"login-button\" onClick={handleSubmit}>Log In</button>\n      </form>\n    </>\n  );\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}